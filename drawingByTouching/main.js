(function(){var t;t={init:function(){return this.mode="mouse","ontouchstart"in window&&(this.mode="touch"),"touch"===this.mode&&document.addEventListener("touchmove",function(t){return t.preventDefault()},!1),this.scaleFactor=window.devicePixelRatio||1,this.createCanvas()},createCanvas:function(){var t;return t=document.createElement("canvas"),t.width=window.innerWidth*this.scaleFactor,t.height=window.innerHeight*this.scaleFactor,document.body.appendChild(t),this.ctx=t.getContext("2d"),this.ctx.strokeStyle="rgba(255,0,0,1)",this.ctx.lineWidth=5*this.scaleFactor,this.ctx.lineCap="round","touch"===this.mode?(t.addEventListener("touchstart",this,!1),t.addEventListener("touchmove",this,!1),t.addEventListener("touchcancel",this,!1)):(t.addEventListener("mousedown",this,!1),t.addEventListener("mouseup",this,!1))},handleEvent:function(t){switch(t.type){case"touchstart":return this.touchStartHandler(t);case"touchmove":return this.touchMoveHandler(t);case"touchcancel":return this.touchCancelHandler(t);case"mousedown":return this.mouseDownHandler(t);case"mouseup":return this.mouseUpHandler(t);case"mousemove":return this.mouseMoveHandler(t)}},touchStartHandler:function(t){return this.ctx.moveTo(t.touches[0].pageX*this.scaleFactor,t.touches[0].pageY*this.scaleFactor)},touchMoveHandler:function(t){return this.ctx.lineTo(t.touches[0].pageX*this.scaleFactor,t.touches[0].pageY*this.scaleFactor),this.ctx.stroke()},touchCancelHandler:function(t){return alert("The application was paused")},mouseDownHandler:function(t){return this.ctx.moveTo(t.layerX*this.scaleFactor,t.layerY*this.scaleFactor),t.target.addEventListener("mousemove",this,!1)},mouseUpHandler:function(t){return t.target.removeEventListener("mousemove",this,!1)},mouseMoveHandler:function(t){return this.ctx.lineTo(t.layerX*this.scaleFactor,t.layerY*this.scaleFactor),this.ctx.stroke()}},t.init()}).call(this);